State {
  print    : chan;
  goodchan : chan;
}

Components {
  Good  "good.py";
  Bad   "bad.py" ;
  Print "print.py";
}

Messages {
  M(str);
}

Init {
  print    = spawn(Print);
  goodchan = spawn(Good);
  spawn(Bad);
}

Exchange(c) {
  Good {
    M(s) when (c =c goodchan) {
      send(print, M(s));
    }
    { } # otherwise
  }
  Bad {
    M(s) when (c =c goodchan) {
      send(print, M(s));
    }
    { } # otherwise
  }
}
